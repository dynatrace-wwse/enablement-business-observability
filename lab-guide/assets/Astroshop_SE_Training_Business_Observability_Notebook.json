{"version":"6","defaultTimeframe":{"from":"-30m","to":"now()"},"defaultSegments":[],"sections":[{"id":"3974af07-2bab-44dc-be18-d1f697442616","type":"markdown","markdown":"## Business Events - OneAgent Capture"},{"id":"a8cd75b5-5368-48f2-8990-d8603419ef36","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"title":"Before Pipeline Rule - Business Event - astroshop.placeorder.success","height":197,"state":{"input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\"\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country,trace_id,ResBody\n| sort timestamp desc"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["timestamp","event.provider","event.type","userId","orderId","country","trace_id","ResBody"],"valueAxis":["revenue"],"categoryAxisLabel":"timestamp,event.provider,event.type,userId,orderId,country,trace_id,ResBody","valueAxisLabel":"revenue","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe","fieldMapping":{"timestamp":"timestamp","leftAxisValues":["revenue"]},"xAxisLabel":"timestamp","xAxisIsLabelVisible":false,"hiddenLegendFields":["dt.kubernetes.workload","k8s.cluster","k8s.container","k8sspace.name","k8s.node","k8s.pod","k8s.workload","revenue"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"revenue","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["event.provider"]},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","result":{"code":200,"value":{"records":[],"metadata":{"grail":{"canonicalQuery":"fetch bizevents\n| filter event.provider == \"astroshop\" AND event.type == \"astroshop.placeorder.success\"\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, trace_id, ResBody\n| sort timestamp desc\n| limit 0","timezone":"America/Detroit","query":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\"\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country,trace_id,ResBody\n| sort timestamp desc\n| limit 0","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-03-26T01:23:13.700Z","end":"2025-03-26T01:53:13.700Z"},"locale":"en-US","executionTimeMilliseconds":3,"notifications":[],"queryId":"544c6bd4-ce43-41fd-8775-b5130a52f436","sampled":false}},"types":[]},"notifications":[],"dateTime":"2025-03-26T01:53:13.896Z","input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\"\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country,trace_id,ResBody\n| sort timestamp desc\n| limit 0"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"8a6f35ea-5e6f-493f-92f3-60fe28b30c54","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"title":"After Pipeline Rule - Business Event - astroshop.placeorder.success ","height":197,"state":{"input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\"\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, shippingTrackingId, trace_id\n| sort timestamp desc"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["timestamp","event.provider","event.type","userId","orderId","country","shippingTrackingId","trace_id"],"valueAxis":["revenue"],"categoryAxisLabel":"timestamp,event.provider,event.type,userId,orderId,country,shippingTrackingId,trace_id","valueAxisLabel":"revenue","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe","fieldMapping":{"timestamp":"timestamp","leftAxisValues":["revenue"]},"xAxisLabel":"timestamp","xAxisIsLabelVisible":false,"hiddenLegendFields":["dt.kubernetes.workload","k8s.cluster","k8s.container","k8sspace.name","k8s.node","k8s.pod","k8s.workload","revenue"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"revenue","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["event.provider"]},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","result":{"code":200,"value":{"records":[],"metadata":{"grail":{"canonicalQuery":"fetch bizevents\n| filter event.provider == \"astroshop\" AND event.type == \"astroshop.placeorder.success\"\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, shippingTrackingId, trace_id\n| sort timestamp desc\n| limit 0","timezone":"America/Detroit","query":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\"\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, shippingTrackingId, trace_id\n| sort timestamp desc\n| limit 0","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-03-26T01:23:35.607Z","end":"2025-03-26T01:53:35.607Z"},"locale":"en-US","executionTimeMilliseconds":2,"notifications":[],"queryId":"1584dd09-f8db-4ce9-b827-aa677cb198ed","sampled":false}},"types":[]},"notifications":[],"dateTime":"2025-03-26T01:53:35.796Z","input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\"\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, shippingTrackingId, trace_id\n| sort timestamp desc\n| limit 0"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"daaaa4f3-93b5-44b3-8bc8-994c7ed087a6","type":"markdown","markdown":"## Business Events - Logs - Fraud Check"},{"id":"f9dd2995-df65-47e5-810a-28636bcb123f","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"title":"Logs that will be used to for the Fraud Check Step","height":292,"state":{"input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch logs\n| filter k8s.container.name == \"frauddetectionservice\"\n| filter matchesPhrase(content, \"Consumed record with orderId:\")\n| parse content, \"\"\"DATA 'Consumed record with orderId: ' ld:orderId ','\"\"\"\n| fields timestamp, orderId, content\n| sort timestamp desc"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["timestamp","orderId","content"],"categoryAxisLabel":"timestamp,orderId,content","valueAxis":[],"valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe","xAxisLabel":"timestamp","xAxisIsLabelVisible":false,"hiddenLegendFields":["dt.kubernetes.cluster","host","k8s.cluster","k8s.container","k8s.deployment","k8sspace.name","k8s.pod","k8s.node","test"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":true,"lineWrapIds":[["content"]],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{"[\"content\"]":1059},"columnTypeOverrides":[{"fields":["content"],"id":1742489467541,"value":"log-content"}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle","displayedFields":["content","orderId"]},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"result":{"code":200,"value":{"records":[],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| filter k8s.container.name == \"frauddetectionservice\"\n| filter matchesPhrase(content, \"Consumed record with orderId:\")\n| parse content, \"\"\"DATA 'Consumed record with orderId: ' ld:orderId ','\"\"\"\n| fields timestamp, orderId, content\n| sort timestamp desc\n| limit 0","timezone":"America/Detroit","query":"fetch logs\n| filter k8s.container.name == \"frauddetectionservice\"\n| filter matchesPhrase(content, \"Consumed record with orderId:\")\n| parse content, \"\"\"DATA 'Consumed record with orderId: ' ld:orderId ','\"\"\"\n| fields timestamp, orderId, content\n| sort timestamp desc\n| limit 0","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-03-26T13:05:54.667Z","end":"2025-03-26T13:35:54.667Z"},"locale":"en-US","executionTimeMilliseconds":4,"notifications":[],"queryId":"a4975113-94b6-4e07-a2d3-15ee6828cda8","sampled":false}},"types":[]},"notifications":[],"dateTime":"2025-03-26T13:35:54.836Z","input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch logs\n| filter k8s.container.name == \"frauddetectionservice\"\n| filter matchesPhrase(content, \"Consumed record with orderId:\")\n| parse content, \"\"\"DATA 'Consumed record with orderId: ' ld:orderId ','\"\"\"\n| fields timestamp, orderId, content\n| sort timestamp desc\n| limit 0"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"visualization":"table"}},{"id":"434cbb6e-6290-49d4-a4f3-7d3333a27123","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"title":"Parse orderId from log lines to be used in business event for Fraud Check","height":321,"state":{"input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch logs\n| filter k8s.container.name == \"frauddetectionservice\"\n| filter matchesPhrase(content, \"Consumed record with orderId:\")\n| filter matchesPhrase(content, \"orderId\")\n| parse content, \"\"\"DATA 'Consumed record with orderId: ' ld:orderId ','\"\"\"\n| fields timestamp, orderId\n| sort timestamp desc"},"visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["timestamp","orderId"],"categoryAxisLabel":"timestamp,orderId","valueAxis":[],"valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":true,"lineWrapIds":[["content"]],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{"[\"content\"]":1160},"columnTypeOverrides":[{"fields":["content"],"id":1742405950364,"value":"log-content"}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle","displayedFields":["orderId"]},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","result":{"code":200,"value":{"records":[],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| filter k8s.container.name == \"frauddetectionservice\"\n| filter matchesPhrase(content, \"Consumed record with orderId:\")\n| filter matchesPhrase(content, \"orderId\")\n| parse content, \"\"\"DATA 'Consumed record with orderId: ' ld:orderId ','\"\"\"\n| fields timestamp, orderId\n| sort timestamp desc","timezone":"America/Detroit","query":"fetch logs\n| filter k8s.container.name == \"frauddetectionservice\"\n| filter matchesPhrase(content, \"Consumed record with orderId:\")\n| filter matchesPhrase(content, \"orderId\")\n| parse content, \"\"\"DATA 'Consumed record with orderId: ' ld:orderId ','\"\"\"\n| fields timestamp, orderId\n| sort timestamp desc","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-03-26T13:09:43.244Z","end":"2025-03-26T13:39:43.244Z"},"locale":"en-US","executionTimeMilliseconds":15,"notifications":[],"queryId":"dffd4986-ab0f-4863-a726-8cd59f6cc8ae","sampled":false}},"types":[]},"notifications":[],"dateTime":"2025-03-26T13:39:43.484Z","input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch logs\n| filter k8s.container.name == \"frauddetectionservice\"\n| filter matchesPhrase(content, \"Consumed record with orderId:\")\n| filter matchesPhrase(content, \"orderId\")\n| parse content, \"\"\"DATA 'Consumed record with orderId: ' ld:orderId ','\"\"\"\n| fields timestamp, orderId\n| sort timestamp desc"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"3cf064e1-5c93-4d61-bbc3-bfa283f46cb6","type":"markdown","markdown":"## Business Events - Logs Converted to Business Events - Fraud Check"},{"id":"0905bbf9-4ceb-4cd2-9f3e-8872ac3a5ec0","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"title":"Business Event - astroshop.fraudcheck.success","height":242,"state":{"input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.fraudcheck.success\"\n| fields timestamp, event.provider, event.type, orderId, trace_id\n| sort timestamp desc"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["timestamp","event.provider","event.type","orderId","trace_id"],"valueAxis":[],"categoryAxisLabel":"timestamp,event.provider,event.type,orderId,trace_id","valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[{"fields":["content"],"id":1742494994502,"value":"log-content"}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle","displayedFields":["event.provider"]},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","result":{"code":200,"value":{"records":[],"metadata":{"grail":{"canonicalQuery":"fetch bizevents\n| filter event.provider == \"astroshop\" AND event.type == \"astroshop.fraudcheck.success\"\n| fields timestamp, event.provider, event.type, orderId, trace_id\n| sort timestamp desc\n| limit 0","timezone":"America/Detroit","query":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.fraudcheck.success\"\n| fields timestamp, event.provider, event.type, orderId, trace_id\n| sort timestamp desc\n| limit 0","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-03-26T13:06:23.722Z","end":"2025-03-26T13:36:23.722Z"},"locale":"en-US","executionTimeMilliseconds":4,"notifications":[],"queryId":"a9ac868b-7908-4212-9ce4-ca278649c669","sampled":false}},"types":[]},"notifications":[],"dateTime":"2025-03-26T13:36:23.894Z","input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.fraudcheck.success\"\n| fields timestamp, event.provider, event.type, orderId, trace_id\n| sort timestamp desc\n| limit 0"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"b133234f-13f1-43fa-9ff4-43b1c48cf79b","type":"markdown","markdown":"## Business Events - API - Order Shipped"},{"id":"d0f83ddc-dce5-4868-9e22-963691d14fee","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"title":"Business Event - astroshop.ordershipped.success","height":242,"state":{"input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.ordershipped.success\"\n| fields timestamp, event.provider, event.type, orderId\n| sort timestamp desc"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["timestamp","event.provider","event.type","orderId"],"valueAxis":[],"categoryAxisLabel":"timestamp,event.provider,event.type,orderId","valueAxisLabel":"","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[{"fields":["content"],"id":1742494994502,"value":"log-content"}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle","displayedFields":["event.provider"]},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","result":{"code":200,"value":{"records":[],"metadata":{"grail":{"canonicalQuery":"fetch bizevents\n| filter event.provider == \"astroshop\" AND event.type == \"astroshop.ordershipped.success\"\n| fields timestamp, event.provider, event.type, orderId\n| sort timestamp desc\n| limit 0","timezone":"America/Detroit","query":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.ordershipped.success\"\n| fields timestamp, event.provider, event.type, orderId\n| sort timestamp desc\n| limit 0","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-03-26T13:06:36.017Z","end":"2025-03-26T13:36:36.017Z"},"locale":"en-US","executionTimeMilliseconds":2,"notifications":[],"queryId":"20a3f928-ac27-4783-b9ff-b7654654835e","sampled":false}},"types":[]},"notifications":[],"dateTime":"2025-03-26T13:36:36.171Z","input":{"timeframe":{"from":"-30m","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.ordershipped.success\"\n| fields timestamp, event.provider, event.type, orderId\n| sort timestamp desc\n| limit 0"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"0fcd6d2d-14d7-467f-94af-b549008a36b6","type":"markdown","markdown":"## Business Events - Metric - Place Order Success By Country"},{"id":"637320d3-6f6c-4c5b-a161-f2a263d1b79c","type":"dql","title":"Place Order Success By Country","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":324,"state":{"input":{"timeframe":{"from":"-30m","to":"now()"},"value":"timeseries placeorder.success = sum(bizevents.astroshop.placeorder.success), by:{country}"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["country"],"categoryAxisLabel":"country","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["interval"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["placeorder.success"]},"leftYAxisSettings":{"isLabelVisible":false,"label":"bizevents.astroshop.placeorder.success"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[{"fields":["placeorder.success"],"value":"sparkline","id":1742783665888}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["country"]},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"barChart","result":{"code":200,"value":{"records":[],"metadata":{"grail":{"canonicalQuery":"timeseries by:{country}, placeorder.success = sum(bizevents.astroshop.placeorder.success)","timezone":"America/Detroit","query":"timeseries placeorder.success = sum(bizevents.astroshop.placeorder.success), by:{country}","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-03-26T13:06:00.000Z","end":"2025-03-26T13:37:00.000Z"},"locale":"en-US","executionTimeMilliseconds":26,"notifications":[],"queryId":"e5e3db61-5a32-4666-874b-64fc821526b3","sampled":false},"metrics":[{"metric.key":"bizevents.astroshop.placeorder.success","displayName":"bizevents.astroshop.placeorder.success","fieldName":"placeorder.success"}]},"types":[]},"notifications":[],"dateTime":"2025-03-26T13:36:48.792Z","input":{"timeframe":{"from":"-30m","to":"now()"},"value":"timeseries placeorder.success = sum(bizevents.astroshop.placeorder.success), by:{country}"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"ef6c9300-1eec-497f-8cf2-f0f5508e3cce","type":"markdown","markdown":"## Business Events - Alert - Place Order - Zero Dollar Orders"},{"id":"a642a7b0-2998-4455-be24-36ce4332d96c","type":"dql","title":"Place Order - Zero Dollar Orders","showTitle":false,"showInput":true,"filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"-24h","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\" and revenue == 0\n| filter revenue == 0\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, shippingTrackingId, trace_id\n| sort timestamp desc"},"visualizationSettings":{"thresholds":[{"id":1,"field":"revenue","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6863)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eca440)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c4233b)"},"comparator":"=","label":"","value":0}]}],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["timestamp","event.provider","event.type","userId","orderId","country","trace_id"],"categoryAxisLabel":"timestamp,event.provider,event.type,userId,orderId,country,trace_id","valueAxis":["revenue"],"valueAxisLabel":"revenue","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe","xAxisLabel":"timestamp","xAxisIsLabelVisible":false,"hiddenLegendFields":["revenue","statuscode"],"fieldMapping":{"timestamp":"timestamp","leftAxisValues":["revenue"]},"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"firstVisibleRowIndex":0,"columnWidths":{},"columnTypeOverrides":[],"colorThresholdTarget":"background","enableThresholdInRow":false,"selectedColumnForRowThreshold":"revenue"},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"revenue","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["event.provider","event.type","userId","orderId","country","trace_id"]},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","state":"success","result":{"code":200,"value":{"records":[],"metadata":{"grail":{"canonicalQuery":"fetch bizevents\n| filter event.provider == \"astroshop\" AND event.type == \"astroshop.placeorder.success\" AND revenue == 0\n| filter revenue == 0\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, shippingTrackingId, trace_id\n| sort timestamp desc\n| limit 0","timezone":"America/Detroit","query":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\" and revenue == 0\n| filter revenue == 0\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, shippingTrackingId, trace_id\n| sort timestamp desc\n| limit 0","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-03-25T13:36:57.685Z","end":"2025-03-26T13:36:57.685Z"},"locale":"en-US","executionTimeMilliseconds":3,"notifications":[],"queryId":"53ee7f75-2256-4990-b73d-3c9e26fb055e","sampled":false}},"types":[]},"notifications":[],"dateTime":"2025-03-26T13:36:58.211Z","input":{"timeframe":{"from":"-24h","to":"now()"},"value":"fetch bizevents\n| filter event.provider == \"astroshop\" and event.type == \"astroshop.placeorder.success\" and revenue == 0\n| filter revenue == 0\n| fields timestamp, event.provider, event.type, userId, orderId, revenue, country, shippingTrackingId, trace_id\n| sort timestamp desc\n| limit 0"},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}}]}